<!DOCTYPE html>
<html>
<head>
    <title>Fall 2025 To-Do List</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 900px; margin: 0 auto; padding: 20px; background: #f5f5f5; }
        .header { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .progress { background: #e0e0e0; height: 10px; border-radius: 5px; overflow: hidden; margin: 10px 0; }
        .progress-fill { background: #4CAF50; height: 100%; transition: width 0.3s; }
        .filters { background: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .filter-btn { padding: 8px 16px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; background: #e0e0e0; }
        .filter-btn.active { background: #2196F3; color: white; }
        .add-task-btn { background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-bottom: 20px; font-size: 16px; }
        .task { background: white; padding: 15px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border-left: 4px solid #2196F3; display: flex; align-items: center; }
        .task.urgent { border-left-color: #f44336; }
        .task.high { border-left-color: #ff9800; }
        .task.completed { opacity: 0.6; text-decoration: line-through; }
        .checkbox { width: 20px; height: 20px; margin-right: 15px; cursor: pointer; }
        .task-info { flex: 1; }
        .task-title { font-weight: bold; margin-bottom: 5px; }
        .task-details { color: #666; font-size: 14px; }
        .due-date { color: #999; font-size: 12px; }
        .task-actions { display: flex; gap: 5px; align-items: center; }
        .link-btn { background: #2196F3; color: white; padding: 5px 10px; border: none; border-radius: 3px; text-decoration: none; font-size: 12px; }
        .edit-btn, .delete-btn { padding: 5px 10px; border: none; border-radius: 3px; cursor: pointer; font-size: 12px; }
        .edit-btn { background: #ff9800; color: white; }
        .delete-btn { background: #f44336; color: white; }
        .urgent-date { color: #f44336; font-weight: bold; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
        .modal-content { background: white; margin: 10% auto; padding: 20px; width: 80%; max-width: 500px; border-radius: 10px; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        .form-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; }
        .save-btn { background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        .cancel-btn { background: #999; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        .close-btn { float: right; font-size: 28px; font-weight: bold; cursor: pointer; color: #aaa; }
        .close-btn:hover { color: black; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Fall 2025 Academic To-Do List</h1>
        <div>Progress: <span id="progress-text">0/0 completed (0%)</span></div>
        <div class="progress">
            <div class="progress-fill" id="progress-bar" style="width: 0%"></div>
        </div>
    </div>

    <button class="add-task-btn" onclick="openAddModal()">➕ Add New Task</button>

    <div class="filters">
        <button class="filter-btn active" onclick="setFilter('all')">All Tasks</button>
        <button class="filter-btn" onclick="setFilter('pending')">Pending</button>
        <button class="filter-btn" onclick="setFilter('completed')">Completed</button>
        <button class="filter-btn" onclick="setFilter('Intro to AI')">Intro to AI</button>
        <button class="filter-btn" onclick="setFilter('Intro to HCI')">Intro to HCI</button>
        <button class="filter-btn" onclick="setFilter('Cartography')">Cartography</button>
    </div>

    <div id="tasks-container"></div>

    <!-- Modal for Add/Edit Task -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <h2 id="modal-title">Add New Task</h2>
            <form id="taskForm">
                <div class="form-group">
                    <label>Task Name:</label>
                    <input type="text" id="task-name" required>
                </div>
                <div class="form-group">
                    <label>Course:</label>
                    <select id="task-course">
                        <option value="Intro to AI">Intro to AI</option>
                        <option value="Intro to HCI">Intro to HCI</option>
                        <option value="Cartography">Cartography</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Type:</label>
                    <select id="task-type">
                        <option value="Assignment">Assignment</option>
                        <option value="Quiz">Quiz</option>
                        <option value="Exam">Exam</option>
                        <option value="Reading">Reading</option>
                        <option value="Project">Project</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Due Date:</label>
                    <input type="date" id="task-due" required>
                </div>
                <div class="form-group">
                    <label>Priority:</label>
                    <select id="task-priority">
                        <option value="urgent">Urgent</option>
                        <option value="high">High</option>
                        <option value="medium">Medium</option>
                        <option value="low">Low</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Link (optional):</label>
                    <input type="url" id="task-link" placeholder="https://...">
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="save-btn">Save Task</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let tasks = [
            {id: 1, course: 'Cartography', task: 'Lab 1', due: '2025-09-17', type: 'Assignment', priority: 'urgent'},
            {id: 2, course: 'Cartography', task: 'Mental Maps Activity', due: '2025-09-17', type: 'Assignment', priority: 'urgent'},
            {id: 3, course: 'Cartography', task: 'Week 2 Quiz', due: '2025-09-17', type: 'Quiz', priority: 'urgent'},
            {id: 4, course: 'Intro to AI', task: 'Assignment 0', due: '2025-09-19', type: 'Assignment', priority: 'urgent', link: 'https://us.prairielearn.com/pl/course_instance/193729/assessment_instance/11015237/'},
            {id: 5, course: 'Intro to AI', task: 'Assignment 0 Quiz', due: '2025-09-19', type: 'Assignment', priority: 'urgent', link: 'https://us.prairielearn.com/pl/course_instance/193729/assessment_instance/11083428/'},
            {id: 6, course: 'Cartography', task: 'Lab 2', due: '2025-09-24', type: 'Assignment', priority: 'high'},
            {id: 7, course: 'Cartography', task: 'Week 3 Quiz', due: '2025-09-24', type: 'Quiz', priority: 'high'},
            {id: 8, course: 'Intro to AI', task: 'Assignment 1', due: '2025-09-26', type: 'Assignment', priority: 'high', link: 'https://us.prairielearn.com/pl/course_instance/193729/assessment/2581204/'},
            {id: 9, course: 'Intro to HCI', task: 'Pitch a Problem Statement', due: '2025-09-26', type: 'Assignment', priority: 'high'},
            {id: 10, course: 'Intro to HCI', task: 'TCPS Certificate of Completion', due: '2025-09-26', type: 'Assignment', priority: 'high'},
            {id: 11, course: 'Cartography', task: 'Lab 3', due: '2025-10-01', type: 'Assignment', priority: 'medium'},
            {id: 12, course: 'Cartography', task: 'Week 4 Quiz', due: '2025-10-01', type: 'Quiz', priority: 'medium'},
            {id: 13, course: 'Intro to AI', task: 'Assignment 2', due: '2025-10-03', type: 'Assignment', priority: 'medium'},
            {id: 14, course: 'Cartography', task: 'Lab 4', due: '2025-10-08', type: 'Assignment', priority: 'medium'},
            {id: 15, course: 'Intro to AI', task: 'Assignment 3', due: '2025-10-10', type: 'Assignment', priority: 'medium'},
            {id: 16, course: 'Intro to HCI', task: 'Design Requirement Report', due: '2025-10-10', type: 'Assignment', priority: 'medium'},
            {id: 17, course: 'Intro to AI', task: 'Midterm 1', due: '2025-10-17', type: 'Exam', priority: 'high'},
            {id: 18, course: 'Intro to HCI', task: 'Midterm', due: '2025-10-20', type: 'Exam', priority: 'high'},
            {id: 19, course: 'Intro to AI', task: 'Assignment 4', due: '2025-10-24', type: 'Assignment', priority: 'medium'},
            {id: 20, course: 'Intro to HCI', task: 'Shark Tank Pitch', due: '2025-10-24', type: 'Assignment', priority: 'medium'}
        ];

        let completed = new Set();
        let currentFilter = 'all';
        let editingTaskId = null;
        let nextTaskId = 21;

        function getDaysLeft(dueDate) {
            const today = new Date('2025-09-15');
            const due = new Date(dueDate);
            const diff = due - today;
            return Math.ceil(diff / (1000 * 60 * 60 * 24));
        }

        function formatDate(date) {
            return new Date(date).toLocaleDateString('en-US', {month: 'short', day: 'numeric'});
        }

        function toggleTask(id) {
            if (completed.has(id)) {
                completed.delete(id);
            } else {
                completed.add(id);
            }
            updateProgress();
            renderTasks();
        }

        function updateProgress() {
            const total = tasks.length;
            const done = completed.size;
            const percent = total > 0 ? Math.round((done / total) * 100) : 0;
            
            document.getElementById('progress-text').textContent = `${done}/${total} completed (${percent}%)`;
            document.getElementById('progress-bar').style.width = `${percent}%`;
        }

        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            renderTasks();
        }

        function openAddModal() {
            editingTaskId = null;
            document.getElementById('modal-title').textContent = 'Add New Task';
            document.getElementById('taskForm').reset();
            document.getElementById('taskModal').style.display = 'block';
        }

        function openEditModal(id) {
            editingTaskId = id;
            const task = tasks.find(t => t.id === id);
            if (!task) return;

            document.getElementById('modal-title').textContent = 'Edit Task';
            document.getElementById('task-name').value = task.task;
            document.getElementById('task-course').value = task.course;
            document.getElementById('task-type').value = task.type;
            document.getElementById('task-due').value = task.due;
            document.getElementById('task-priority').value = task.priority;
            document.getElementById('task-link').value = task.link || '';
            document.getElementById('taskModal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('taskModal').style.display = 'none';
            editingTaskId = null;
        }

        function deleteTask(id) {
            if (confirm('Are you sure you want to delete this task?')) {
                tasks = tasks.filter(t => t.id !== id);
                completed.delete(id);
                updateProgress();
                renderTasks();
            }
        }

        document.getElementById('taskForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const taskData = {
                task: document.getElementById('task-name').value,
                course: document.getElementById('task-course').value,
                type: document.getElementById('task-type').value,
                due: document.getElementById('task-due').value,
                priority: document.getElementById('task-priority').value,
                link: document.getElementById('task-link').value || null
            };

            if (editingTaskId) {
                // Edit existing task
                const taskIndex = tasks.findIndex(t => t.id === editingTaskId);
                if (taskIndex !== -1) {
                    tasks[taskIndex] = { ...tasks[taskIndex], ...taskData };
                }
            } else {
                // Add new task
                tasks.push({ id: nextTaskId++, ...taskData });
            }

            tasks.sort((a, b) => new Date(a.due) - new Date(b.due));
            closeModal();
            updateProgress();
            renderTasks();
        });

        function renderTasks() {
            const container = document.getElementById('tasks-container');
            let filtered = tasks.filter(task => {
                if (currentFilter === 'all') return true;
                if (currentFilter === 'pending') return !completed.has(task.id);
                if (currentFilter === 'completed') return completed.has(task.id);
                return task.course === currentFilter;
            });

            container.innerHTML = filtered.map(task => {
                const daysLeft = getDaysLeft(task.due);
                const isCompleted = completed.has(task.id);
                const isOverdue = daysLeft < 0;
                const isUrgent = daysLeft <= 2 && daysLeft >= 0;
                
                let daysText = '';
                if (isOverdue) {
                    daysText = `<span class="urgent-date">${Math.abs(daysLeft)} days overdue</span>`;
                } else if (daysLeft === 0) {
                    daysText = '<span class="urgent-date">Due today</span>';
                } else if (daysLeft === 1) {
                    daysText = '<span class="urgent-date">Due tomorrow</span>';
                } else {
                    daysText = `${daysLeft} days left`;
                }

                const linkHtml = task.link ? `<a href="${task.link}" target="_blank" class="link-btn">Open Link</a>` : '';

                return `
                    <div class="task ${task.priority} ${isCompleted ? 'completed' : ''}">
                        <input type="checkbox" class="checkbox" ${isCompleted ? 'checked' : ''} 
                               onclick="toggleTask(${task.id})">
                        <div class="task-info">
                            <div class="task-title">${task.task}</div>
                            <div class="task-details">${task.course} • ${task.type}</div>
                            <div class="due-date">${formatDate(task.due)} • ${daysText}</div>
                        </div>
                        <div class="task-actions">
                            ${linkHtml}
                            <button class="edit-btn" onclick="openEditModal(${task.id})">Edit</button>
                            <button class="delete-btn" onclick="deleteTask(${task.id})">Delete</button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('taskModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Initialize
        updateProgress();
        renderTasks();
    </script>
</body>
</html>
